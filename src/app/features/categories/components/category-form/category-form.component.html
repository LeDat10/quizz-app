<!-- <div class="py-8 mx-auto max-w-4xl">
  <div class="mb-8">
    <h1 class="text-3xl font-bold text-gray-900">Add Category</h1>
    <p class="text-gray-600 mt-2">Fill in details for your new category</p>
  </div>

  <div class="bg-white shadow-md rounded-lg">
    <div class="p-4">
      
    </div>
  </div>
</div> -->

<!-- <div
  class="fixed inset-0 z-50 flex items-center justify-center"
  *ngIf="isMounted"
>
  <div
    class="fixed inset-0 bg-gray-500/75 transition-opacity duration-300 ease-in-out"
    [ngClass]="isAnimating ? 'opacity-100' : 'opacity-0'"
    (click)="OnCloseForm()"
  ></div>
  <div
    class="relative bg-white rounded-lg overflow-hidden shadow-xl transform transition-all duration-300 ease-in-out sm:my-8 sm:max-w-4xl mx-4"
    [ngClass]="isAnimating ? 'animate-fadeOut' : 'animate-fadeIn'"
  >
    <div
      class="bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4 border-b border-gray-200"
    >
      <div class="sm:flex sm:items-start">
        <div class="mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full">
          <h3 class="text-lg leading-6 font-medium text-gray-900">
            Add Category
          </h3>
        </div>
      </div>
    </div>
    <form [formGroup]="categoryForm" (ngSubmit)="OnSubmitted()">
      <div class="p-6 flex flex-col space-y-6 overflow-y-auto max-h-[80vh]">
        <app-custom-input
          label="Category name"
          type="text"
          placeholder="Ex: Web development"
          id="category-name"
          class="block"
          formControlName="title"
        ></app-custom-input>

        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
          <app-custom-input
            label="Position"
            type="number"
            placeholder="1"
            id="position"
            [min]="1"
            class="block"
            formControlName="position"
          ></app-custom-input>

          <app-custom-select
            label="Status"
            [options]="options"
            class="block"
            formControlName="status"
          ></app-custom-select>
        </div>

        <app-custom-textarea
          label="Description"
          [id]="'editor-' + editorKey"
          class="block"
          formControlName="description"
        ></app-custom-textarea>

        <app-custom-upload-image
          label="Avatar"
          previewMode="single"
          formControlName="thumbnail"
        ></app-custom-upload-image>
      </div>

      <div class="bg-gray-50 px-6 py-4 flex justify-end space-x-2">
        <app-custom-button
          type="button"
          variant="secondary"
          (clicked)="OnCloseForm()"
          >Cancel</app-custom-button
        >

        <app-custom-button type="submit" variant="primary"
          >Save</app-custom-button
        >
      </div>
    </form>
  </div>
</div> -->

<nz-modal
  [(nzVisible)]="showForm"
  [nzTitle]="selectedCategory ? 'Edit Category' : 'Add Category'"
  (nzOnCancel)="OnCloseForm()"
  nzWidth="60%"
  [nzFooter]="null"
  nzWrapClassName="category-modal"
>
  <ng-container *nzModalContent>
    <nz-spin [nzSpinning]="loading" nzTip="Saving category...">
      <form
        nz-form
        nzLayout="vertical"
        [formGroup]="categoryForm"
        (ngSubmit)="OnSubmitted()"
      >
        <nz-form-item>
          <nz-form-label nzRequired nzFor="title">Title</nz-form-label>
          <nz-form-control nzErrorTip="The input is not valid Title!">
            <input type="text" id="title" nz-input formControlName="title" />
          </nz-form-control>
        </nz-form-item>

        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
          <nz-form-item>
            <nz-form-label nzFor="position">Position</nz-form-label>
            <nz-form-control>
              <nz-input-number
                id="position"
                formControlName="position"
                nzMin="1"
                class="!w-full"
                nzPlaceHolder="Auto-increment"
              />
            </nz-form-control>
          </nz-form-item>

          <nz-form-item>
            <nz-form-label nzRequired nzFor="Status">Status</nz-form-label>
            <nz-form-control nzErrorTip="The input is not valid Status!">
              <nz-select formControlName="status">
                <nz-option nzLabel="Draft" nzValue="draft"></nz-option>
                <nz-option nzLabel="Published" nzValue="published"></nz-option>
                <nz-option nzLabel="Inactive" nzValue="inactive"></nz-option>
                <nz-option nzLabel="Archived" nzValue="archived"></nz-option>
              </nz-select>
            </nz-form-control>
          </nz-form-item>
        </div>

        <nz-form-item>
          <app-custom-textarea
            label="Description"
            [id]="'description'"
            class="block w-full"
            formControlName="description"
          ></app-custom-textarea>
        </nz-form-item>

        <nz-form-item>
          <nz-form-label nzFor="image">Image</nz-form-label>
          <nz-form-control>
            <nz-upload
              nzListType="picture-card"
              [nzPreview]="handlePreview"
              [nzLimit]="1"
              [nzCustomRequest]="uploadToCloudinary"
              (nzChange)="handleChangeUpload($event)"
              [nzAccept]="'image/*'"
              [nzFileList]="fileList"
              [nzDownload]="handleDownload"
              [nzRemove]="handleRemove"
            >
              <div>
                <nz-icon nzType="plus" />
                <div style="margin-top: 8px">Upload</div>
              </div>
            </nz-upload>
            <nz-modal
              [nzVisible]="previewVisible"
              [nzContent]="modalContent"
              [nzFooter]="null"
              (nzOnCancel)="previewVisible = false"
            >
              <ng-template #modalContent>
                <img [src]="previewImage" style="width: 100%" />
              </ng-template>
            </nz-modal>
          </nz-form-control>
        </nz-form-item>

        <div nz-row [nzGutter]="16" nzJustify="end" nzAlign="middle">
          <div nz-col>
            <button
              nz-button
              nzType="default"
              type="button"
              (click)="OnCloseForm()"
            >
              Cancel
            </button>
          </div>
          <div nz-col>
            <button nz-button nzType="primary" type="submit">Save</button>
          </div>
        </div>
      </form>
    </nz-spin>
  </ng-container>
</nz-modal>
